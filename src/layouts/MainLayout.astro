---
import { Navigation } from "../components/Navigation";
import { ClientRouter } from "astro:transitions";

interface Props {
  title?: string;
}
const { title = "Patrícia Christan de Souza - Psicóloga" } = Astro.props;
---

<!doctype html>
<html lang="pt-BR">
  <head>
    {/* Google Analytics */}
    <script
      type="text/javascript"
      async
      src={`https://www.googletagmanager.com/gtag/js?id=${import.meta.env.PUBLIC_GA_ID}`}
    ></script>
    <script
      type="text/javascript"
      define:vars={{ gaId: import.meta.env.PUBLIC_GA_ID }}
    >
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", gaId);
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>{title}</title>
    <ClientRouter />
    <meta
      name="description"
      content="Psicóloga Patrícia Christan de Souza (CRP 08/40942) em Francisco Beltrão - PR. Atendimento psicológico presencial e online. Especialista em ansiedade, depressão, autoconhecimento e desenvolvimento pessoal."
    />
    <meta
      name="keywords"
      content="psicóloga Francisco Beltrão, psicóloga Paraná, psicoterapia Francisco Beltrão, psicóloga online, atendimento psicológico, CRP 08/40942, ansiedade, depressão, terapia online"
    />
    <meta name="author" content="Patrícia Christan de Souza" />
    <meta name="theme-color" content="#ffffff" />

    {/* Open Graph / Facebook / WhatsApp */}
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta
      property="og:description"
      content="Psicóloga em Francisco Beltrão - PR. Atendimento presencial e online."
    />
    <meta
      property="og:image"
      content="https://patricia.christan.com.br/pati.jpeg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="1800" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta
      property="og:image:alt"
      content="Patrícia Christan de Souza - Psicóloga"
    />
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:site_name" content="Patrícia Christan de Souza" />

    {/* Twitter */}
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta
      property="twitter:description"
      content="Psicóloga em Francisco Beltrão - PR. Atendimento presencial e online."
    />
    <meta
      property="twitter:image"
      content="https://patricia.christan.com.br/pati.jpeg"
    />

    <link rel="apple-touch-icon" href="/favicon.svg" />

    {/* Structured Data - Local Business */}
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Psychologist",
        "name": "Patrícia Christan de Souza",
        "description": "Psicóloga Clínica",
        "image": "/pati.jpeg",
        "telephone": "+55-46-99982-7595",
        "email": "psi.patriciachristan@gmail.com",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Francisco Beltrão",
          "addressRegion": "PR",
          "addressCountry": "BR"
        },
        "areaServed": [
          {
            "@type": "City",
            "name": "Francisco Beltrão",
            "containedIn": {
              "@type": "State",
              "name": "Paraná"
            }
          },
          {
            "@type": "Country",
            "name": "Brasil"
          }
        ],
        "availableChannel": [
          {
            "@type": "ServiceChannel",
            "serviceType": "Atendimento Presencial",
            "availableLanguage": "pt-BR"
          },
          {
            "@type": "ServiceChannel",
            "serviceType": "Atendimento Online",
            "availableLanguage": "pt-BR"
          }
        ],
        "priceRange": "$$",
        "url": "https://patricia.christan.com.br",
        "sameAs": ["https://www.instagram.com/psi.patriciachristan"]
      }
    </script>
  </head>
  <body>
    <div class="min-h-screen flex flex-col">
      <Navigation client:load />

      <main class="flex-1">
        <slot />
      </main>

      <footer class="bg-muted/50 border-t mt-20">
        <div class="container mx-auto px-4 py-8">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h3 class="font-semibold text-lg mb-3">
                Patrícia Christan de Souza
              </h3>
              <p class="text-sm text-muted-foreground">CRP - 08/40942</p>
              <p class="text-sm text-muted-foreground mt-2">
                Psicóloga Clínica
              </p>
            </div>

            <div>
              <h3 class="font-semibold text-lg mb-3">Contato</h3>
              <p class="text-sm text-muted-foreground">
                Email: <a
                  href="mailto:psi.patriciachristan@gmail.com"
                  data-track="appointment"
                  class="hover:text-primary transition-colors"
                  >psi.patriciachristan@gmail.com</a
                >
              </p>
              <p class="text-sm text-muted-foreground">
                Tel: <a
                  href="https://wa.me/5546999827595?text=Olá! Gostaria de agendar uma consulta."
                  target="_blank"
                  rel="noopener noreferrer"
                  data-track="appointment"
                  class="hover:text-primary transition-colors"
                  >(46) 99982-7595</a
                >
              </p>
              <p class="text-sm text-muted-foreground mt-2">
                Instagram: <a
                  href="https://www.instagram.com/psi.patriciachristan"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="hover:text-primary transition-colors"
                  >@psi.patriciachristan</a
                >
              </p>
            </div>

            <div>
              <h3 class="font-semibold text-lg mb-3">Localização</h3>
              <p class="text-sm text-muted-foreground">
                Francisco Beltrão - PR
              </p>
              <p class="text-sm text-muted-foreground">Atendimento online</p>
              <p class="text-sm text-muted-foreground">para todo o Brasil</p>
            </div>
          </div>

          <div
            class="mt-8 pt-4 border-t text-center text-sm text-muted-foreground"
          >
            <p>
              &copy; {new Date().getFullYear()} Patrícia Christan de Souza. Todos
              os direitos reservados.
            </p>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>

<script>
  import "../styles/global.css";

  // Google Analytics Event Tracking
  const setupAnalytics = () => {
    const trackButtons = document.querySelectorAll(
      '[data-track="appointment"]',
    ) as NodeListOf<HTMLElement>;

    trackButtons.forEach((button) => {
      button.addEventListener("click", () => {
        if (typeof window.gtag === "function") {
          window.gtag("event", "click_schedule", {
            event_category: "interaction",
            event_label: "Agendar Consulta",
          });
        }
      });
    });
  };

  // Run on initial load and after view transitions
  setupAnalytics();
  document.addEventListener("astro:page-load", setupAnalytics);
</script>
